CompensationPlanScreen As screen:
    OnVisible: |-
        =UpdateContext({varDataSetBuffer:Filter('Employee fixed compensation (mserp)',mserp_pwccompensationid_custom = Param("EntityId"))});Set(_popup,false);

    CompensationStructureGrid As dataTable.datatable:
        BorderStyle: =BorderStyle.Solid
        DisplayMode: =DisplayMode.Edit
        Fill: =RGBA(0, 0, 0, 0)
        Height: =417
        Items: |-
            =If(IsBlank(First(varDataSetBuffer).'Compensation id'), Blank(),
            SortByColumns(Filter('Compensation structure (mserp)',
                Level = First(varDataSetBuffer).Level,
                Grid = First(varDataSetBuffer).Plan
            ),"mserp_amount", SortOrder.Ascending))
        Width: =1262
        X: =40
        Y: =125
        ZIndex: =1

        "'Compensation structure (mserp)_Column1' As dataTableColumn.textualColumn":
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Compensation structure (mserp)"
            FieldName: ="mserp_hcmcompensationstructureentityid"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =3
            Text: =ThisItem.'Compensation structure (mserp)'
            Width: =100
            X: =0
            Y: =0
            ZIndex: =17

        "'Reference point_Column1' As dataTableColumn.textualColumn":
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Reference point"
            FieldName: ="mserp_referencepoint"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =12
            Text: =ThisItem.'Reference point'
            Width: =100
            X: =0
            Y: =0
            ZIndex: =18

        Amount_Column1 As dataTableColumn.numberColumn:
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Amount"
            FieldName: ="mserp_amount"
            FieldVariantName: ="numberColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =10
            Text: |-
                =Text(ThisItem.Amount, "Â£#,###.00")
            Width: =100
            X: =0
            Y: =0
            ZIndex: =19

        Level_Column2 As dataTableColumn.textualColumn:
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Level"
            FieldName: ="mserp_levelid"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =9
            Text: =ThisItem.Level
            Width: =100
            X: =0
            Y: =0
            ZIndex: =20

        Grid_Column1 As dataTableColumn.textualColumn:
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Grid"
            FieldName: ="mserp_grid"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =11
            Text: =ThisItem.Grid
            Width: =100
            X: =0
            Y: =0
            ZIndex: =21

        "'Reference setup_Column1' As dataTableColumn.textualColumn":
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Reference setup"
            FieldName: ="mserp_referencesetup"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =13
            Text: =ThisItem.'Reference setup'
            Width: =100
            X: =0
            Y: =0
            ZIndex: =22

        "'Primary Field_Column1' As dataTableColumn.textualColumn":
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Compensation structure number"
            FieldName: ="mserp_primaryfield"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =14
            Text: =ThisItem.'Primary Field'
            Width: =100
            X: =0
            Y: =0
            ZIndex: =23

    "'Update bar point' As button":
        Height: =48
        OnSelect: |-
            =Patch('Employee fixed compensation (mserp)',  First(Filter('Employee fixed compensation (mserp)','Compensation id' = First(varDataSetBuffer).'Compensation id')) , { 'Bar point': BarPointTxt.Text, 'Bar point amount': Value(BarPointAmountNumber.Text)});Set(_popup,true)
        Text: ="Update bar point"
        Width: =494
        X: =766
        Y: =596
        ZIndex: =2

    BarPointTxt As text:
        AccessibleLabel: ="Bar point"
        Default: =CompensationStructureGrid.Selected.'Reference point'
        Visible: =false
        X: =40
        Y: =644
        ZIndex: =3

    CurrentBarPointInsLevel As label:
        FontWeight: =FontWeight.Bold
        Height: =31
        Text: |-
            ="Current Bar Point :"
        Width: =203
        X: =40
        Y: =40
        ZIndex: =4

    SelectInsLevel As label:
        FontWeight: =FontWeight.Bold
        Height: =28
        Text: ="Select new bar point from table and click on Update bar point"
        Width: =587
        X: =40
        Y: =81
        ZIndex: =5

    PopUpRectangle As rectangle:
        BorderThickness: =3
        Fill: =RGBA(255, 255, 255, 1)
        Height: =277
        Visible: =_popup
        Width: =532
        X: =440
        Y: =169
        ZIndex: =6

    Close As button:
        OnSelect: =Set(_popup,false)
        Text: ="Close"
        Visible: =_popup
        X: =782
        Y: =701
        ZIndex: =7

    "'Current bar point level' As label":
        FontWeight: =FontWeight.Bold
        Height: =31
        Text: =Concatenate(First(varDataSetBuffer).'Bar point', "  ",Text(First(varDataSetBuffer).'Bar point amount'))
        Width: =351
        X: =225
        Y: =40
        ZIndex: =8

    PopupLevel As label:
        FontWeight: =FontWeight.Bold
        Height: =38
        Text: ="Update bar point"
        Visible: =_popup
        Width: =204
        X: =606
        Y: =189
        ZIndex: =9

    PopUpLevel2 As label:
        FontWeight: =FontWeight.Bold
        Height: =165
        Text: ="You have selected the option of selecting the Bar point. Kindly close this page and refresh compensation plan."
        Visible: =_popup
        Width: =429
        X: =489
        Y: =210
        ZIndex: =10

    BarPointAmountNumber As text:
        AccessibleLabel: ="Bar point amount number"
        Default: =CompensationStructureGrid.Selected.Amount
        Format: =TextFormat.Number
        Visible: =false
        X: =766
        Y: =701
        ZIndex: =11

